
<!DOCTYPE html>
<html>

<style>
    #form-tabs {
    display: flex;
    justify-content: space-between;
    margin-bottom: 20px;
    }

    .form-tab {
    width: 33.3%;
    padding: 10px;
    border: 1px solid black;
    }

    .form-tab.active {
    border: 2px solid #8403fc;
    }

    .form-stage {
    display: none;
    }

    .form-stage.active {
    display: block;
    }

    form {
        display: flex;
        flex-direction: column;
        margin-top:1em;
    }

    .form-step-title {
        text-align: center;
    }

    #form-tabs {
        display: flex;
        justify-content: center;
        margin: 0 auto;
    }

    .nav-buttons{
      margin-top: 3em;
      margin-bottom: 5em;
    }

    #footer {
      position: absolute;
      bottom: 0;
      width: 100%;
      height: 3.3rem;            /* Footer height */
    }

    #page-container {
      position: relative;
      min-height: 86vh;
    }

    .nav {
      display: flex;
      justify-content: space-between;
    }

    .nav li:nth-child(4){
      margin-left: auto;
    }

    .nav li {
      display: flex;
      align-items: center;
    }

    @media (max-width: 767px) {
        .container {
            margin-top: 100px;
        }
    }

</style>

<head>
    <title>Council Report Page</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="../CSS/style.CSS">
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
</head>

<body>
  <nav style="position:sticky;z-index: 1100;">
    <!-- space and framework left to make navbar collapsable if needed -->
          <div class="">
            <ul class="nav">
              <li><a href="Index.html">Home</a></li>
              <li><a class="NavActive" href="ReportPage.php">Report Issue</a></li>
              <li><a href="ContactUs.html">Contact Us</a></li>
              <li class="mr-2" style="float:right;display: flex; justify-content: flex-end;"><a href="Index.html" id="NavSignIn">Sign In</a></li>
              <!-- <li style="float:right"><a href="AccountSettings.html">Account Settings</a></li> -->
              <li style="float:right;display: flex; justify-content: flex-end;"><input type="text" name="Search" value="" placeholder="Search"></li>
            </ul>
          </div>
  </nav>

  <div id="page-container">
    <div class="container" style="padding-bottom: 2.5rem;">
      <div>
          <h1 class="text-center mt-5">Report a Problem</h1>
          <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore
            magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
            consequat. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore
            magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
            consequat. Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore
            magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
            consequat.</p>
      </div>

      <div class="mt-4" id="form-tabs">
        <div class="form-tab">Information</div>
        <div class="form-tab">Issue Type</div>
        <div class="form-tab">Issue Location</div>
        <div class="form-tab">Further Details</div>
      </div>

      <form id="formCreateReport" method="POST">

        <div class="form-stage">
          <h1>Information</h1>
          <p>Use this service to report an issue in your local area. You'll need to provide:</p>
          <ul>
              <li>The exact address or location of the issue</li>
              <li>A description of the issue</li>
              <li>Photos</li>
              <li>Your name (optional)</li>
              <li>Your contact details (optional)</li>
          </ul>
          <button style="background-color: #8403fc; border: none;" class="next-button btn btn-primary" type="button">Next</button>
        </div>

        <div class="form-stage">
          <h1>Issue Type</h1>
          <label for="issueSelect">Dropdown List</label>
          <select name="issueSelect" class="form-control" style="width:30%" id="issueSelect">
              <option>Littering</option>
              <option>Graffiti</option>
              <option>Pothole</option>
              <option>Flooding</option>
              <option>Wrecked car</option>
              <option>Live wire</option>
              <option>Broken Streetlight</option>
          </select>
          <div class="mt-3">
              <button class="prev-button btn btn-secondary" type="button">Previous</button>
              <button style="background-color: #8403fc; border: none;" class="next-button btn btn-primary" type="button">Next</button>
          </div>
        </div>

        <div class="form-stage">
          <h1>Issue Location</h1>
          <div id="map-canvas" class="mt-3" style="height: 425px; width: 100%;"></div>
          <div class="mt-4" style="display:flex">
            <input type="hidden" id="lat" name="lat">
            <input type="hidden" id="lng" name="lng">
            <p class="mr-3">Can't access the map? Enter the address here:</p>
            <input name="manualAddress" type="text" class="form-control" style="width:50%" id="address" placeholder="Enter address">
          </div>
          <div class="mt-3 nav-buttons">
              <button class="prev-button btn btn-secondary" type="button">Previous</button>
              <button style="background-color: #8403fc; border: none;" class="next-button btn btn-primary" type="button">Next</button>
          </div>
        </div>

        <div class="form-stage">
          <h1>Further Details</h1>
          <div class="form-group">
              <label for="problemDescription">
                Please give as much information as you can about: <br>
                <ul>
                <li>What the issue is</li>
                <li>The size of the issue </li>
                <li>How long you think the issue has been there </li>
                <li>Any risks caused by the issue </li>
                <li>Relevant landmarks or points of reference</li>
                </ul>
              </label>
              <textarea name="problemDescription" class="form-control" style="width:50%" id="problemDescription" rows="3" required></textarea>
          </div>
          <div class="form-group">
              <label for="imageUpload">Upload Image</label>
              <input type="file" class="form-control-file" id="imageUpload">
          </div>

          <div class="mt-3 nav-buttons">
          <button class="prev-button btn btn-secondary" type="button">Previous</button>
          <button style="background-color: #8403fc; border: none;" class="submit-button btn btn-primary" type="submit">Submit</button>
          </div>
        </div>
        
      </form>
      <script src="../JS/submitReport.js"></script>

      <div id="success-message" style="display: none;">
        <h1 class="mt-5">Thank you for bringing this issue to our attention!</h1>
      </div>
    </div>

    <footer id="footer">
      <div class="" style="width:45%;">
        <a href="ContactUs.html">Contact Us</a><br>
        Report a bug: CheltBugReport@email.com
      </div>
      <div class="" style="width:45%;">
      Made by TEMA TEMA inc
      </div>
      <div class="" style="width:10%;">
        <img src="../Images/tematemalogo.png" height="40px" width="40px">
      </div>
    </footer>
  </div>
  
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script type='text/javascript' src='https://maps.google.com/maps/api/js?language=en&key=AIzaSyB61QLHLhzPTxEB9A3AJHCWwYz8caQq1Tg&libraries=places&region=GB'></script>

    <script>
    function addMarker(latLng) {
      let marker = new google.maps.Marker({
        map: map,
        position: latLng,
        draggable: true
      });

      document.getElementById('lat').value = marker.getPosition().lat();
      document.getElementById('lng').value = marker.getPosition().lng();

      markersArray.push(marker);

      google.maps.event.removeListener(listener);
    }

    var map;
    var latLng = new google.maps.LatLng(51.8994, -2.0783);

    var mapOptions = {
      zoom: 14,
      center: latLng,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    }

    map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

    var listener = map.addListener('click', function(e) {
      console.log(e);
      addMarker(e.latLng);
    });
    </script>

    <script>
        const form = document.getElementById('formCreateReport');
        const stages = document.getElementsByClassName('form-stage');
        const tabs = document.getElementsByClassName('form-tab');
        const nextButtons = document.getElementsByClassName('next-button');
        const prevButtons = document.getElementsByClassName('prev-button');

        let currentStage = 0;
        tabs[currentStage].classList.add('active');
        stages[currentStage].classList.add('active');

        for (let i = 0; i < nextButtons.length; i++) {
        nextButtons[i].addEventListener('click', () => {
            stages[currentStage].classList.remove('active');
            tabs[currentStage].classList.remove('active');

            currentStage++;
            stages[currentStage].classList.add('active');
            tabs[currentStage].classList.add('active');
        });
        }

        for (let i = 0; i < prevButtons.length; i++) {
        prevButtons[i].addEventListener('click', () => {
            stages[currentStage].classList.remove('active');
            tabs[currentStage].classList.remove('active');

            currentStage--;
            stages[currentStage].classList.add('active');
            tabs[currentStage].classList.add('active');
        });
        }
    </script>

    <script>
      function handleFormSubmission(event) {
        event.preventDefault(); // Prevent the form from submitting

        // Get a reference to the form and the success message
        const form = document.getElementById('formCreateReport');
        const successMessage = document.getElementById('success-message');

        // Hide the form and show the success message
        form.style.display = 'none';
        successMessage.style.display = 'block';
      }

      // Add an event listener to the form submit event
      const form2 = document.getElementById('formCreateReport');
      form.addEventListener('submit', handleFormSubmission);
    </script>
 </body>
</html>